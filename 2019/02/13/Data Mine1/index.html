<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="kaggle," />










<meta name="description" content="Competition IntroductionIn Elo Merchant Category Recommendation competition, kagglers will develop algorithms to identify and serve the most relevant opportunities to individuals, by uncovering signa">
<meta name="keywords" content="kaggle">
<meta property="og:type" content="article">
<meta property="og:title" content="a initial explore for Elo Merchant Category Recommendation, a kaggle competition">
<meta property="og:url" content="https://PaperStrange.github.io/2019/02/13/Data Mine1/index.html">
<meta property="og:site_name" content="Hello, world :)">
<meta property="og:description" content="Competition IntroductionIn Elo Merchant Category Recommendation competition, kagglers will develop algorithms to identify and serve the most relevant opportunities to individuals, by uncovering signa">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://paperstrange.github.io/2019/02/13/Data%20Mine1/%22https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/title_image.png%22">
<meta property="og:image" content="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/scale_and_memory_usage.png">
<meta property="og:image" content="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/target_dis.png">
<meta property="og:image" content="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/importance_20190210.png">
<meta property="og:image" content="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/importances_part.png">
<meta property="og:updated_time" content="2019-02-13T04:09:54.475Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="a initial explore for Elo Merchant Category Recommendation, a kaggle competition">
<meta name="twitter:description" content="Competition IntroductionIn Elo Merchant Category Recommendation competition, kagglers will develop algorithms to identify and serve the most relevant opportunities to individuals, by uncovering signa">
<meta name="twitter:image" content="https://paperstrange.github.io/2019/02/13/Data%20Mine1/%22https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/title_image.png%22">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://PaperStrange.github.io/2019/02/13/Data Mine1/"/>





  <title>a initial explore for Elo Merchant Category Recommendation, a kaggle competition | Hello, world :)</title>
  








</head>


<script type="text/javascript"
color="4,255,0" opacity='1.0' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hello, world :)</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">E = m * c^2 = ?</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://PaperStrange.github.io/2019/02/13/Data Mine1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziqiang Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello, world :)">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">a initial explore for Elo Merchant Category Recommendation, a kaggle competition</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-13T12:09:54+08:00">
                2019-02-13
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-02-13T12:09:54+08:00">
                2019-02-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/日常随笔/" itemprop="url" rel="index">
                    <span itemprop="name">日常随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/13/Data Mine1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/02/13/Data Mine1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/02/13/Data Mine1/" class="leancloud_visitors" data-flag-title="a initial explore for Elo Merchant Category Recommendation, a kaggle competition">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  932
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="&quot;https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/title_image.png&quot;" alt="Elo Merchant Category Recommendation competition"></p>
<h2 id="Competition-Introduction"><a href="#Competition-Introduction" class="headerlink" title="Competition Introduction"></a>Competition Introduction</h2><p>In Elo Merchant Category Recommendation competition, kagglers will develop algorithms to identify and serve the most relevant opportunities to individuals, by uncovering signal in <code>customer loyalty</code>, which will improve customers’ lives and help Elo reduce unwanted campaigns as well as create the right experience for customers. The competition entrance is <a href="https://www.kaggle.com/c/elo-merchant-category-recommendation" target="_blank" rel="noopener">here</a>.</p>
<h2 id="About-this-blog"><a href="#About-this-blog" class="headerlink" title="About this blog"></a>About this blog</h2><p>Using a <a href="https://github.com/Microsoft/LightGBM" target="_blank" rel="noopener">LightGBM</a> model, this blog tries to dive into initial explore of training and testing datasets. New features are built by extracting numberical feat from <code>first active month</code> in order to recover some information from the time series.</p>
<h2 id="Blog-Content"><a href="#Blog-Content" class="headerlink" title="Blog  Content"></a>Blog  Content</h2><ol>
<li><a href="#1">Questions for better business understanding</a></li>
<li><a href="#2">Feature engineering tricks</a></li>
<li><a href="#3">Results evaluation: conclusion and discussion</a></li>
</ol>
<p><a id="1"></a> <br></p>
<h3 id="1-Questions-for-better-business-understanding"><a href="#1-Questions-for-better-business-understanding" class="headerlink" title="1. Questions for better business understanding"></a>1. Questions for better business understanding</h3><p>At the beginning, a good understanding of data is always appreciable. In this blog we only consider two datasets: training dataset and testing dataset. By asking  questions, here is what i find:</p>
<h4 id="Question-1-1-What-scale-and-what-kind-of-data-are-necessary-for-customer-loyalty-prediction-model"><a href="#Question-1-1-What-scale-and-what-kind-of-data-are-necessary-for-customer-loyalty-prediction-model" class="headerlink" title="Question 1.1: What scale and what kind of data are necessary for customer loyalty prediction model?"></a>Question 1.1: What scale and what kind of data are necessary for customer loyalty prediction model?</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/scale_and_memory_usage.png" width="300" align="center"></p>
<p><strong><center>Fig1: scale and memory usage of datasets</center></strong></p>
<p>A: This question is supposed to provide proper evaluation of how many sources company need to invest for the deploy of customer loyalty prediction model. Because MemoryError is raised when checking transaction dataset, i choose to evaluate the memory usage of theses data files by using google colab.</p>
<p>The results of scale and memory usage of each dataset are shown in the Fig1. As it is shown above, all needed data could be divided in three parts: card feature data, transaction data and merchant data. Card feature data and merchant data both are relatively small than transaction data, which the later is nearly 30 million, with memory usage more than 8 GB in total in this competition</p>
<h4 id="Question-1-2-In-which-way-the-application-of-customer-loyalty-prediction-model-would-impact-different-business-units"><a href="#Question-1-2-In-which-way-the-application-of-customer-loyalty-prediction-model-would-impact-different-business-units" class="headerlink" title="Question 1.2: In which way the application of customer loyalty prediction model would impact different business units?"></a>Question 1.2: In which way the application of customer loyalty prediction model would impact different business units?</h4><p>A:<br>By diving into this question, necessary changes would to be revealed which will help company work better.</p>
<p>If customer loyalty prediction model are applied, finance part may need to expand or reconstruct existed database to record more features as well as missing values; sales part need to use the conclusion of model for decision and collect customer review; technology part is supposed to assure model stability and improve model using or constructing new features from finance part and reviews from sales part. This process would be visualized by a business cycle, more details for model deploy is provided in this blog <a href="https://towardsdatascience.com/scaling-ai-2be294368504" target="_blank" rel="noopener">here</a>.</p>
<h4 id="Question-1-3-How-to-evaluate-the-influence-of-deploying-customer-loyalty-prediction-model-Is-modeling-target-really-convincible"><a href="#Question-1-3-How-to-evaluate-the-influence-of-deploying-customer-loyalty-prediction-model-Is-modeling-target-really-convincible" class="headerlink" title="Question 1.3: How to evaluate the influence of deploying customer loyalty prediction model? Is modeling target really convincible?"></a>Question 1.3: How to evaluate the influence of deploying customer loyalty prediction model? Is modeling target really convincible?</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/target_dis.png" width="450" align="center"></p>
<p><strong><center>Fig2: distribution of “target”</center></strong></p>
<p>A: This question aims at assuring the application of customer loyalty prediction model more controllable and scalable.</p>
<p>Take a look at the Fig 2, the feat column “target”, the modeling target, is stored in numberical data type which means several loss function like MSE could be used for evaluation. By checking its distribution, there are outliers around -30 found in modeling target which means not all target data is convincible.</p>
<p><a id="2"></a> <br></p>
<h3 id="2-Feature-engineering-tricks"><a href="#2-Feature-engineering-tricks" class="headerlink" title="2. Feature engineering tricks"></a>2. Feature engineering tricks</h3><p>As discussed above, the feats in two datasets is far more sufficient to obtain a good submit score. For simplicity, new numberical feats are added by extraction from “first_active_month” using python package datetime. In detail, hour, day, month and year of each time data are obtained. What’s more, convert hour to string such as “morning” and convert month to string such as “March” are applied for further analysis below.</p>
<p><a id="3"></a> <br></p>
<h3 id="3-Results-evaluation-conclusion-and-discussion"><a href="#3-Results-evaluation-conclusion-and-discussion" class="headerlink" title="3. Results evaluation: conclusion and discussion"></a>3. Results evaluation: conclusion and discussion</h3><p>Same as what i did in the first section, some questions i found are reviewed and answered in this step. Generally, the more <code>good</code> questions are reviewed, the better understanding of model evaluation you gain.</p>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/importance_20190210.png" width="500" align="center"><br><strong><center>Fig3: feature importance</center></strong></p>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/importances_part.png" width="300" align="center"><br><strong><center>Fig4: part of feature importance extracted from “first_active_month”</center></strong></p>
<p>Take a further look at the Fig3, “first_active_month_elapsed_time_today” contributes most to the model prediction while “first_active_month_monthsession_January” contributes least. Among the feat extracted from date data shown in the Fig4, “first_active_month_elapsed_time_today” gains the most importance while the “first_active_month_monthsession_January” gain the least importance as well, which means valuable information hidden in “first_active_month”. Isn’t it a intersting finding? </p>
<p>When we compare distribution training dataset and testing dataset of the same feat, here comes new findings. “first_active_month_elapsed_time_today”, “first_active_month_elapsed_time_specific” shows measurable different distribution between training data and testing data, among which the first one is the feature picked by the above two questions. On the other hand, the left feats couldn’t provide considerable difference on data distribution between two datasets, which is relatively consistent with the result shown in feat importance figure. More details could refer to my github <a href="https://github.com/PaperStrange/Udacity_records.git" target="_blank" rel="noopener">here</a>.</p>
<h2 id="What’s-next"><a href="#What’s-next" class="headerlink" title="What’s next?"></a>What’s next?</h2><p>Up to now, we have briefly went through the whole data processing procedure. For me, next i’d like to add more feats by considering other files provided by this competition. Also, it is advisable for you to start a mining journal following exsited kernel which is listed in the below references. By the way, there is a few questions that i want to share with you which i think maybe desirble to be devoted to:</p>
<ul>
<li><p>How many feats are suitable? Generally, the more feats you obtain may not guarantee higer submit score you expect</p>
</li>
<li><p>For this model, missing value would not lead to the failure of LightGBM. If using LightGBM, how to deal with missing values? Imputer or just keep by?</p>
</li>
</ul>
<p>Hope everyone has a magic data miner time! :)</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><p><a href="https://www.kaggle.com/chauhuynh/my-first-kernel-3-699/" target="_blank" rel="noopener">My first kernel (3.699) by Chau Ngoc Huynh</a></p>
</li>
<li><p><a href="https://www.kaggle.com/denzo123/a-closer-look-at-date-variables" target="_blank" rel="noopener">A Closer Look at Date Variables by Robin Denz</a></p>
</li>
<li><p><a href="https://www.kaggle.com/konradb/lgb-fe-lb-3-707" target="_blank" rel="noopener">LGB + FE (LB 3.707) by Konrad Banachewicz</a></p>
</li>
</ol>

      
    </div>
    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/uploads/wechat-qcode-tem.jpg" alt="Ziqiang Huang wechat" style="width: 200px; max-width: 100%;"/>
    <div>Intersted? just subscribe to my blog by scanning my public wechat account :)</div>
</div>

      </div>
    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    Ziqiang Huang
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://PaperStrange.github.io/2019/02/13/Data Mine1/" title="a initial explore for Elo Merchant Category Recommendation, a kaggle competition">https://PaperStrange.github.io/2019/02/13/Data Mine1/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/kaggle/" rel="tag"># kaggle</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/03/Python learning list/" rel="next" title="Python learning list - Contents">
                <i class="fa fa-chevron-left"></i> Python learning list - Contents
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/touxiang.jpg"
                alt="Ziqiang Huang" />
            
              <p class="site-author-name" itemprop="name">Ziqiang Huang</p>
              <p class="site-description motion-element" itemprop="description">=Explore or Explode=</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/paperstrange" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="ziqianghuang@hust.edu.cn" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Competition-Introduction"><span class="nav-number">1.</span> <span class="nav-text">Competition Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#About-this-blog"><span class="nav-number">2.</span> <span class="nav-text">About this blog</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Blog-Content"><span class="nav-number">3.</span> <span class="nav-text">Blog  Content</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Questions-for-better-business-understanding"><span class="nav-number">3.1.</span> <span class="nav-text">1. Questions for better business understanding</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Question-1-1-What-scale-and-what-kind-of-data-are-necessary-for-customer-loyalty-prediction-model"><span class="nav-number">3.1.1.</span> <span class="nav-text">Question 1.1: What scale and what kind of data are necessary for customer loyalty prediction model?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Question-1-2-In-which-way-the-application-of-customer-loyalty-prediction-model-would-impact-different-business-units"><span class="nav-number">3.1.2.</span> <span class="nav-text">Question 1.2: In which way the application of customer loyalty prediction model would impact different business units?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Question-1-3-How-to-evaluate-the-influence-of-deploying-customer-loyalty-prediction-model-Is-modeling-target-really-convincible"><span class="nav-number">3.1.3.</span> <span class="nav-text">Question 1.3: How to evaluate the influence of deploying customer loyalty prediction model? Is modeling target really convincible?</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Feature-engineering-tricks"><span class="nav-number">3.2.</span> <span class="nav-text">2. Feature engineering tricks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Results-evaluation-conclusion-and-discussion"><span class="nav-number">3.3.</span> <span class="nav-text">3. Results evaluation: conclusion and discussion</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What’s-next"><span class="nav-number">4.</span> <span class="nav-text">What’s next?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">5.</span> <span class="nav-text">References</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ziqiang Huang</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://Mr.huang.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'https://PaperStrange.github.io/2019/02/13/Data Mine1/';
          this.page.identifier = '2019/02/13/Data Mine1/';
          this.page.title = 'a initial explore for Elo Merchant Category Recommendation, a kaggle competition';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://Mr.huang.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  














  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("uggdldePw9b53l6Sih8jNsg1-gzGzoHsz", "9Re7YaGRwH9FxTJxbYepouqw");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
