<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">


  <link rel="manifest" href="/images/manifest.json">


  <meta name="msapplication-config" content="/images/browserconfig.xml" />



  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="=Explore or Explode=">
<meta name="keywords" content="Machine Learning, Interdisciplinary">
<meta property="og:type" content="website">
<meta property="og:title" content="Hello, world :)">
<meta property="og:url" content="https://PaperStrange.github.io/index.html">
<meta property="og:site_name" content="Hello, world :)">
<meta property="og:description" content="=Explore or Explode=">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello, world :)">
<meta name="twitter:description" content="=Explore or Explode=">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://PaperStrange.github.io/"/>





  <title>Hello, world :)</title>
  








</head>


<script type="text/javascript"
color="4,255,0" opacity='1.0' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hello, world :)</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">E = m * c^2 = ?</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://PaperStrange.github.io/2019/06/17/Udacity_final_projects/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziqiang Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello, world :)">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/17/Udacity_final_projects/" itemprop="url">Explore findings on Udacity Final Project for Data Scientist Nanodegree</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-17T22:22:04+08:00">
                2019-06-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-06-20T10:08:48+08:00">
                2019-06-20
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/data-analysis/" itemprop="url" rel="index">
                    <span itemprop="name">data analysis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/06/17/Udacity_final_projects/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/06/17/Udacity_final_projects/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/06/17/Udacity_final_projects/" class="leancloud_visitors" data-flag-title="Explore findings on Udacity Final Project for Data Scientist Nanodegree">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,687
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  11
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/beamer_Udacity_final_project.png" align="center"></p>
<h2 id="Project-Introduction"><a href="#Project-Introduction" class="headerlink" title="Project Introduction"></a>Project Introduction</h2><p>In this Udacity project, demographics data for customers of a mail-order sales company in Germany are analyzed, comparing it against demographics information for the general population. Unsupervised learning techniques to perform customer segmentation are applied, identifying the parts of the population that best describe the core customer base of the company. Then, a supervised model is used to predict which individuals are most likely to convert into becoming customers for the company. The data that used here has been provided by Udacity partners at Bertelsmann Arvato Analytics, and represents a real-life data science task.</p>
<h2 id="Motivation-of-this-blog"><a href="#Motivation-of-this-blog" class="headerlink" title="Motivation of this blog"></a>Motivation of this blog</h2><p>Have fun! This is a real, meaningful task. Take it, a wonderful jounery, and enjoy exploring the secret within the data. This is such a pleasure, right?</p>
<h2 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h2><ol>
<li><a href="#1">Business and data understanding</a></li>
<li><a href="#2">Data Preprocessing</a></li>
<li><a href="#3">Result evaluation</a></li>
<li><a href="#4">What is next?</a></li>
</ol>
<p><a id="1"></a> <br></p>
<h3 id="1-Questions-for-better-business-understanding"><a href="#1-Questions-for-better-business-understanding" class="headerlink" title="1. Questions for better business understanding"></a>1. Questions for better business understanding</h3><p>At the beginning, a good understanding of data is always appreciable. By asking  questions, here is what i find. </p>
<p>For business understanding:</p>
<h4 id="Question-1-1-Before-model-is-applied-how-to-design-an-online-experiment-to-show-its-effectiveness"><a href="#Question-1-1-Before-model-is-applied-how-to-design-an-online-experiment-to-show-its-effectiveness" class="headerlink" title="Question 1.1: Before model is applied, how to design an online experiment to show its effectiveness?"></a>Question 1.1: Before model is applied, how to design an online experiment to show its effectiveness?</h4><p>Answer: An online experiment mainly is used to give a proof of what model predicts. Thus, the design of online experiment relies on the model prediction or prediction requirements. By following these constraints and design procedures, an online experiment could be achieved. Then, compare the experiment results with model predictions to make finnal decisions on the deploy of model.</p>
<h4 id="Question-1-2-If-model-is-applied-and-operates-normally-how-to-quantify-and-evaluate-the-net-income-from-model"><a href="#Question-1-2-If-model-is-applied-and-operates-normally-how-to-quantify-and-evaluate-the-net-income-from-model" class="headerlink" title="Question 1.2: If model is applied and operates normally, how to quantify and evaluate the net income from model?"></a>Question 1.2: If model is applied and operates normally, how to quantify and evaluate the net income from model?</h4><p>Answer: Directly, the income by purchase increase in relative ares where model is deployed should be considered as earnings. Meanwhile, the cost of deploy such as computer power, maintenance and new employees should be treated as cost. Combine two types of income, we could obtain the net income.</p>
<h4 id="Question-1-3-After-model-operates-for-a-long-time-how-to-deal-with-the-differences-between-the-model-predictions-and-reviews-by-customers"><a href="#Question-1-3-After-model-operates-for-a-long-time-how-to-deal-with-the-differences-between-the-model-predictions-and-reviews-by-customers" class="headerlink" title="Question 1.3: After model operates for a long time, how to deal with the differences between the model predictions and reviews by customers?"></a>Question 1.3: After model operates for a long time, how to deal with the differences between the model predictions and reviews by customers?</h4><p>Answer: After deploying, cause there is no 100% accuracy for any model, there must exist some disagree cases or reviews. These cases could be added directly to balance original dataset. Meanwhile, if computer power is enough, dynamic programming could be applied to treat model bias automatically, which would save workload.</p>
<hr>
<p>For data understanding:</p>
<h4 id="Question-2-1-How-“big”-is-the-datasets"><a href="#Question-2-1-How-“big”-is-the-datasets" class="headerlink" title="Question 2.1: How “big” is the datasets?"></a>Question 2.1: How “big” is the datasets?</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/datasets_scale_memory_Udacity_final_project.png" width="300" align="center"></p>
<p><strong><center>Fig1: scale and memory usage of two datasets</center></strong></p>
<p>Answer: As it is shown in Fig1, two datasets contains about 100w cases and around 600 Mb memory use in total, which do not agree with the common definition of “big data”</p>
<h4 id="Question-2-2-How-imbalanced-is-the-datasets"><a href="#Question-2-2-How-imbalanced-is-the-datasets" class="headerlink" title="Question 2.2: How imbalanced is the datasets?"></a>Question 2.2: How imbalanced is the datasets?</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/imbalance_checking_Udacity_final_project.png" width="600" align="center"></p>
<p><strong><center>Fig2: a sample feature distribution of two datasets</center></strong></p>
<p>Answer: As it is shown in Fig2, the comparison graphs of a sample feature show that the distribution ratio of each feature in azdias and customers data are relatively small (commonly less than 6:1) which means imbalance problem could be omitted safely (Mpre details could be referred to the first part of <em>Step 0.3.1: Visiualize Checkings</em> in this notebook <a href="https://github.com/PaperStrange/Udacity_records/blob/DS_term2/DS_term2_project-final/Arvato%20Project%20Workbook.ipynb" target="_blank" rel="noopener">here</a>.</p>
<h4 id="Question-2-3-How-to-deal-with-small-sample-data"><a href="#Question-2-3-How-to-deal-with-small-sample-data" class="headerlink" title="Question 2.3: How to deal with small sample data?"></a>Question 2.3: How to deal with small sample data?</h4><p>Answer: Generally, several methods such as over-sampling, under-sampling and Synthetic Data could be choosed. For this project, small sample data is checked in <em>Step 0.3.2: Assess Missing Data</em> of the same notebook noted above to determine whether to keep or not.</p>
<p><a id="2"></a> <br></p>
<h3 id="2-Data-Proprocessing"><a href="#2-Data-Proprocessing" class="headerlink" title="2. Data Proprocessing"></a>2. Data Proprocessing</h3><p>Though different algorithms correspond to different data requirements, clean and no-missing data is always helpful not only for the further analysis but also for the the convenience of transfer learning. In this project, several techiques are used and two of them are choosed to be introduced here.</p>
<h4 id="2-1-Evaluation-of-missing-data"><a href="#2-1-Evaluation-of-missing-data" class="headerlink" title="2.1 Evaluation of missing data"></a>2.1 Evaluation of missing data</h4><p>Evaluation mainly include three steps: </p>
<ul>
<li><p>First, convert unknown values to NaNs. A parsing to make use of map relationship to identify unknown values is applied to unknown values. In details, data that matches a ‘unknown’ value in <em>DIAS Attributes - Values 2017.xlsx</em> is converted into a numpy NaN value. </p>
</li>
<li><p>Then, missing data in each column is assessed. For azdias data, it is found that there are more than 100 feats among 360 feats have no missing data. Most common missing ratio of azdias columns is near 15 percentage while least common missing ratio of azdias columns is near 95% percentage. While for customers data, there are more than 100 feats among 360 feats have no missing data which is similar to azdias dataset. However, most common missing ratio of customers columns is near 25 percentage while least common missing ratio of azdias columns is near 95% percentage. Thus, the feats whose vacancy ratio is greater than 0.4 for the both two datasets are dropped. </p>
</li>
<li><p>Finally, missing data in each row is assessed. For azdias data, the data with lots of missing values are qualitatively different with data that has few or no missing values. The same finding is found in customers data. As a result, no drop would be taken and a special notice on those data would be added.</p>
</li>
</ul>
<h4 id="2-2-Feature-engineering"><a href="#2-2-Feature-engineering" class="headerlink" title="2.2 Feature engineering"></a>2.2 Feature engineering</h4><p>Feature engineering done in this project mainly includes select and re-encode binary features and multi-class features, engineer mixed-type features. </p>
<ul>
<li><p>For the first part, binary feature values are mapped into {0, 1}. Multi-class feature “CAMEO_DEUG_2015” is operated individually to extract the stored century time information. Apart from it, other multi-class features are parased by pandas attribute “.get_dummies” with the first dummy dropped to avoid miscellaneous information. </p>
</li>
<li><p>For the second part, a simple algorithm to detect mixed type features is applied by searching key words like “mix”, “+” in the “Description” column in the <em>DIAS Information Levels - Attributes 2017.xlsx</em> file. What should be mentioned here is that not all features could be searched in this excel file, thus the prior knowledge of the unsupervised learning project finished before is used here. Feature “PRAEGENDE_JUGENDJAHRE” and feature “CAMEO_INTL_2015” are regared as mixed feature and operated using the desription in the same excel file shown before.</p>
</li>
</ul>
<p>Besides the two techiques mentioned above, feature scaling is applied to get a full, clean data. More details could refer to “Step 0.3.3: Feature Engineerings” in this notebook <a href="https://github.com/PaperStrange/Udacity_records/blob/DS_term2/DS_term2_project-final/Arvato%20Project%20Workbook.ipynb" target="_blank" rel="noopener">here</a>.</p>
<p><a id="3"></a> <br></p>
<h3 id="3-Result-evaluation"><a href="#3-Result-evaluation" class="headerlink" title="3. Result evaluation"></a>3. Result evaluation</h3><p>This section mainly includes two parts: discussion of findings by unsupervised learning and supervised learning. </p>
<h4 id="unsupervised-learning-result"><a href="#unsupervised-learning-result" class="headerlink" title="unsupervised learning result"></a>unsupervised learning result</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/feature_weight_azdias_Udacity_final_project.png" width="600" align="center"></p>
<p><strong><center>Fig3: feature weight of the first principal components for azdias dataset</center></strong></p>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/feature_weight_customers_Udacity_final_project.png" width="600" align="center"></p>
<p><strong><center>Fig4: feature weight of the first principal components for customers dataset</center></strong></p>
<p>For azdias data shown in Fig3,  all positive contributed feats of the first three components come from feature “CAMEO_DEU_2015”.  Futhermore, referring to the description excel file, the first component corresponds to the <em>Fine Management</em> group. For customers data shown in Fig4,  all positive contributed feats of the first three components come from feature “CAMEO_DEU_2015” too. Referring to the description excel file, the first component corresponds to the <em>Fine Management</em> group. Compared with azdias data, both analysis of the first components include the <strong>Fine Management</strong> and <strong>City Nobility</strong> group, which means the considerable importance behind the feature “CAMEO_DEU_2015” and its derived features.</p>
<hr>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/overrepresented_and_underrepresented_cluster_distribution_in_two_datasets_Udacity_final_project.png" width="600" align="center"></p>
<p><strong><center>Fig5: overrepresented and underrepresented cluster distribution differences in two datasets </center></strong></p>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/people_type_of_overrepresented_cluster_Udacity_final_project.png" width="300" align="center"></p>
<p><strong><center>Fig6: people type of overrepresented clusters</center></strong></p>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/people_type_of_underrepresented_cluster_Udacity_final_project.png" width="300" align="center"></p>
<p><strong><center>Fig7: people type of underrepresented clusters</center></strong></p>
<p>As it is shown in Fig5, which cluster or clusters are overrepresented in the customer dataset compared to the general population and which are underrepresented are obtained here. The threshold used here is 4%, which means if the ratio difference of a cluster by azdias minus customer data is larger than 4%, it belongs to the underrepresented type; in opposite, if the ratio difference of a cluster by customer minus azdias data is larger than 4%, it belongs to the overrepresented type.  Following this ruler, underrepresented clusters include cluster 13 and cluster 20, overrepresented clusters include cluster 2 and cluster 5. </p>
<p>To investigate deeply,  people types of two kings of cluster are shown in Fig6 and Fig7 seperatively. For overrepresented cluster type shown in Fig6, cluster 2  and 5 show that people with <strong>Active Retirement(“CAMEO_DEU_2015_5F”)</strong>, <strong>Long-established(“CAMEO_DEU_2015_6C”)</strong>, <strong>Frugal Aging(“CAMEO_DEU_2015_6F”)</strong>, and <strong>First Shared Apartment(“CAMEO_DEU_2015_9A”)</strong> or high transactional activity on <strong>product group DIGITAL SERVICES(“D19_DIGIT_SERV_RZ”)</strong>,  <strong>BANKS in the last 24 months(“D19_BANKEN_ANZ_24”)</strong> and <strong>INSURANCE in the last 12 months(“D19_VERSI_ANZ_12”)</strong> are more likely to become customer. However, for underrepresented cluster type shown in Fig7,  cluster 13 and cluster 20 show that people with high transactional activity on <strong>the last transaction for the segment telecommunication ONLINE(“D19_TELKO_ONLINE_DATUM”)</strong>, <strong>BANKS in the last 12 months(“D19_BANKEN_ANZ_12”)</strong> and <strong>the product group GARDENING PRODUCTS(“D19_GARTEN”)</strong> are less likely to become customers. </p>
<h4 id="supervised-learning-result"><a href="#supervised-learning-result" class="headerlink" title="supervised learning result"></a>supervised learning result</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/lgbm_importances_Udacity_final_project.png" width="500" align="center"></p>
<p><strong><center>Fig8: feature importance</center></strong></p>
<p>Take a further look at the Fig8, <strong>“D19_SOZIALES”</strong> contributes most to the model prediction while <strong>“W_KEIT_KIND_HH”</strong> contributes least. Checking the fetures found in Fig3, 4 and Fig 6, 7, theses features don’t contribute enough as expected, which means there is much room for improvement for unsupervised learning part.</p>
<p>Meanwhile, improvement on model choose is applied using grid search and pipeline tricks, for more details, please refer to the <em>Step 2.3: improvement - creating a machine learning pipeline</em> in this notebook <a href="https://github.com/PaperStrange/Udacity_records/blob/DS_term2/DS_term2_project-final/Arvato%20Project%20Workbook.ipynb" target="_blank" rel="noopener">here</a>.</p>
<p><a id="4"></a> <br></p>
<h3 id="4-What’s-next"><a href="#4-What’s-next" class="headerlink" title="4. What’s next?"></a>4. What’s next?</h3><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/kaggle_submission.png" width="400" align="center"></p>
<p><strong><center>Fig9: competition rank up to now</center></strong></p>
<p>Up to now, we have briefly went through the main parts of data analysis procedure. Fig9 shows the recent rank i have reached. For me, selecting feats by considering better cluster algorithms is more proper than adjusting the hyper parameters of supervised learning to obtain a higher score. Also, it is advisable for you to start a kaggle journal following exsited great kernels. By the way, there is a few questions that i want to share with you which i think maybe desirble to be devoted to:</p>
<ul>
<li><p>How many feats are suitable? Generally, the more feats you obtain may not guarantee higer submit score you expect while the more computer power you are expectd to have.</p>
</li>
<li><p>Missing value would not lead to the failure of LightGBM. If keep using LightGBM, how to deal with missing values? What about changing a supervised model?</p>
</li>
</ul>
<p>Hope everyone has a magic data miner time! :)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://PaperStrange.github.io/2019/05/18/Learning_Notes_sample/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziqiang Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello, world :)">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/18/Learning_Notes_sample/" itemprop="url">Learning notes sample</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-18T22:28:59+08:00">
                2019-05-18
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-05-27T23:03:39+08:00">
                2019-05-27
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/dairy/" itemprop="url" rel="index">
                    <span itemprop="name">dairy</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/18/Learning_Notes_sample/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/05/18/Learning_Notes_sample/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/05/18/Learning_Notes_sample/" class="leancloud_visitors" data-flag-title="Learning notes sample">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  20
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h3><ol>
<li><a href="#introduction">Brief introduction to book</a><ul>
<li>Author</li>
<li>Genres</li>
</ul>
</li>
<li><a href="#note">Note</a></li>
<li><a href="#memo">Memos</a></li>
</ol>
<p>、、、<br>Date: Year/Month/Day</p>
<h2 id="Recorder-HZQ"><a href="#Recorder-HZQ" class="headerlink" title="Recorder: HZQ"></a>Recorder: HZQ</h2><p>Main Body<br>、、、</p>
<!-- ## Pre-requirements <a name="Pre-requirements"></a>

The requirements could be divided into two parts: platform requirements and term or prior knowledge requirements. For platform requirements, commonly, linux systems always make a start more convenient than windows and also bring more potential conflicts and bugs. For terms you need, it highly depends on the field and the problem you dive into. For simplicity, this section mainly focus on the first part: platform requirements.

### Linux

Let's start with linux first. As we know, there are many kinds of linux systems lilke RedHat, Ubuntu, Centos and so on. Here Ubuntu is choosed for its low dependent of hardware support and desktop like windows.

Since the main purpose of preparation is aimed at reducing those unnecessary time costs, checking the version of your system will be a nice start because the pre-installed softwares in most linux system are often different with each other. Like python, different ubuntu system pre-install different version. What you should check include several key points listed below:

* Pre-installed hardware governing tools
* Pre-installed compiler
* The enviroment path 

Tutorials to guide your check in Ubuntu could be found in other blog of mine labeled as "computer-toolbox". Here, a brief, whole procedure is the main focus.

### Windows

Compared with linxu, using windows could save time of installing hardware and their governing tools most of time, meanwhile the installation of compiler, IDE and other developer helper maybe much easier. However, a correct environment path weights more for windows because of the potential annoying bugs. Then, find out the weakness brought by the programming language you choose and fix it. For python, you could refer to the discussions in reddit [here](https://www.reddit.com/r/Python/comments/f5tex/what_are_the_main_weaknesses_of_python_as_a/). At last, a file manger is a good helper to lead you among the messy cache files to find out your demand. `Everything` is recommmended and could be downloaded freely [here](https://www.voidtools.com/zh-cn/).

## Main procedures <a name="procedures"></a>

### Question: ask, ask and ask

Beleive your initial impulse and vision could make you much more comfortable for a continuous contribution. The first step to beat down a competition is asking questions. No matter how many time you have, no matter how experienced you are, asking could help you have a clear task and vision all the time. Just stop looking for experiences but looking for questions and it will help you much easier get ready for the competition. The next question is, where should you ask? Platform like stackflow, reddit and quora are pretty good choice for the veteran while the kernel in each kaggle competition, issues in each github are much acceptable for the novice. In a word, find out a suitable platform for yourself and keep asking during the competition, then you are on the way to the champion ~

### Train-Validate-Test: why not?

Besides the necessary habit formed from the above, let's focus on more detail about the common tricks. Typically, we would like to split data into three parts: train, validation and test to avoid over-fitting. Remember never touch test data when training? That is it. 

The point is different models, different split schemes. For example, convolutional neutral network generally show more sensitivity to the number of training data than generative adversarial network, thus for the first kind of model, more data is needed for training. In a word, no eternal truth and the truth is always changeable but also worth to explore.

### Display: what about telling a story?

After completing the above steps, most difficult programming parts shall be worked out. Just take a breathe, say a congratulations to yourself! Good job! But wait, how to share your great findings with your team members? Well, for this question, i heared so many points to advocate the importance of colorful graphs, charts while it really confuses me: why do we rely on them so much? Only a presentation full of beautiful telling graphs shall be recognized as a sucess? For me, they seem too dogmatic to use, but why so many people like it? 

The focus of nowadays presentation put too much attention to tools rather than the speaker itself. Take a display of your work is somehow like telling a story. Imagine the way you persuaded your mother or father to buy an attractive toy or clothes when you were a child, then write it in your words to create a prototype of story. Next, it's time to dress-up your work. Think from the view of audiences is suggested here, just ask yourself some simple questions like What major, profession do they come from? How many audiences require prior knowledge and how many not? And imagine, if you are one of them, what do you want to hear from this story is exactly what your polishing should carefully focus on. So far, the only thing left to be done is talk. Share your story with your team numbers and ask for advices will bring you more fresh ideas and never let you down. Enjoy talking! Enjoy the gradual grow up of new stories!

## Find your push! <a name="push"></a>

Many competition will provide timeline and key points in their website. During the long long procedure, find your push, especially your internal push will give you endless courage. Like a honest, determined, energetic friend, he/she may whisper warmfully: forget the fantastic reward, taste the procedure, witness the growth up of one and another idea. How amazing it is! For me, break your comfort zone like a brave always push me from stopping for a computer game. And you? Have you find your push yet?

Awesome! The main contents of this blog ends here. After finishing the whole reading, why not give it a try? I mean, everyone has their first time to move from their comfort zone, just don't let the coward in your heart stop your infinite possibility of journey :smile::smile: -->

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://PaperStrange.github.io/2019/03/14/Data Mine2_kaggle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziqiang Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello, world :)">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/14/Data Mine2_kaggle/" itemprop="url">Deal with inbalance in a NLP classification task by extracting numerical features</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-14T21:52:13+08:00">
                2019-03-14
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-06-17T22:27:50+08:00">
                2019-06-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/14/Data Mine2_kaggle/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/03/14/Data Mine2_kaggle/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/03/14/Data Mine2_kaggle/" class="leancloud_visitors" data-flag-title="Deal with inbalance in a NLP classification task by extracting numerical features">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  854
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- ![Elo Merchant Category Recommendation competition]("https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/title_image.png") -->
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/title_image.png" align="center"></p>
<h2 id="Competition-Introduction"><a href="#Competition-Introduction" class="headerlink" title="Competition Introduction"></a>Competition Introduction</h2><p>In Elo Merchant Category Recommendation competition, kagglers will develop algorithms to identify and serve the most relevant opportunities to individuals, by uncovering signal in <code>customer loyalty</code>, which will improve customers’ lives and help Elo reduce unwanted campaigns as well as create the right experience for customers. The competition entrance is <a href="https://www.kaggle.com/c/elo-merchant-category-recommendation" target="_blank" rel="noopener">here</a>.</p>
<h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>Using a <a href="https://github.com/Microsoft/LightGBM" target="_blank" rel="noopener">LightGBM</a> model, this blog tries to dive into initial explore of training and testing datasets. New features are built by extracting numberical feat from <code>first active month</code> in order to recover some information from the time series.</p>
<h2 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h2><ol>
<li><a href="#1">Questions for better business understanding</a></li>
<li><a href="#2">Results evaluation: conclusion and discussion</a></li>
<li><a href="#3">References</a></li>
</ol>
<p><a id="1"></a> <br></p>
<h3 id="1-Questions-for-better-business-understanding"><a href="#1-Questions-for-better-business-understanding" class="headerlink" title="1. Questions for better business understanding"></a>1. Questions for better business understanding</h3><p>At the beginning, a good understanding of data is always appreciable. In this blog we only consider two datasets: training dataset and testing dataset. By asking  questions, here is what i find:</p>
<h4 id="Question-1-1-What-scale-and-what-kind-of-data-are-necessary-for-customer-loyalty-prediction-model"><a href="#Question-1-1-What-scale-and-what-kind-of-data-are-necessary-for-customer-loyalty-prediction-model" class="headerlink" title="Question 1.1: What scale and what kind of data are necessary for customer loyalty prediction model?"></a>Question 1.1: What scale and what kind of data are necessary for customer loyalty prediction model?</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/scale_and_memory_usage.png" width="300" align="center"></p>
<p><strong><center>Fig1: scale and memory usage of datasets</center></strong></p>
<p>A: This question is supposed to provide proper evaluation of how many sources company need to invest for the deploy of customer loyalty prediction model. Because MemoryError is raised when checking transaction dataset, i choose to evaluate the memory usage of theses data files by using google colab.</p>
<p>The results of scale and memory usage of each dataset are shown in the Fig1. As it is shown above, all needed data could be divided in three parts: card feature data, transaction data and merchant data. Card feature data and merchant data both are relatively small than transaction data, which the later is nearly 30 million, with memory usage more than 8 GB in total in this competition</p>
<h4 id="Question-1-2-In-which-way-the-application-of-customer-loyalty-prediction-model-would-impact-different-business-units"><a href="#Question-1-2-In-which-way-the-application-of-customer-loyalty-prediction-model-would-impact-different-business-units" class="headerlink" title="Question 1.2: In which way the application of customer loyalty prediction model would impact different business units?"></a>Question 1.2: In which way the application of customer loyalty prediction model would impact different business units?</h4><p>A:<br>By diving into this question, necessary changes would to be revealed which will help company work better.</p>
<p>If customer loyalty prediction model are applied, finance part may need to expand or reconstruct existed database to record more features as well as missing values; sales part need to use the conclusion of model for decision and collect customer review; technology part is supposed to assure model stability and improve model using or constructing new features from finance part and reviews from sales part. This process would be visualized by a business cycle, more details for model deploy is provided in this blog <a href="https://towardsdatascience.com/scaling-ai-2be294368504" target="_blank" rel="noopener">here</a>.</p>
<h4 id="Question-1-3-How-to-evaluate-the-influence-of-deploying-customer-loyalty-prediction-model-Is-modeling-target-really-convincible"><a href="#Question-1-3-How-to-evaluate-the-influence-of-deploying-customer-loyalty-prediction-model-Is-modeling-target-really-convincible" class="headerlink" title="Question 1.3: How to evaluate the influence of deploying customer loyalty prediction model? Is modeling target really convincible?"></a>Question 1.3: How to evaluate the influence of deploying customer loyalty prediction model? Is modeling target really convincible?</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/target_dis.png" width="450" align="center"></p>
<p><strong><center>Fig2: distribution of “target”</center></strong></p>
<p>A: This question aims at assuring the application of customer loyalty prediction model more controllable and scalable.</p>
<p>Take a look at the Fig 2, the feat column “target”, the modeling target, is stored in numberical data type which means several loss function like MSE could be used for evaluation. By checking its distribution, there are outliers around -30 found in modeling target which means not all target data is convincible.</p>
<p><a id="2"></a> <br></p>
<h3 id="2-Results-evaluation-conclusion-and-discussion"><a href="#2-Results-evaluation-conclusion-and-discussion" class="headerlink" title="2. Results evaluation: conclusion and discussion"></a>2. Results evaluation: conclusion and discussion</h3><p>Same as what i did in the first section, some questions i found are reviewed and answered in this step. Generally, the more <code>good</code> questions are reviewed, the better understanding of model evaluation you gain.</p>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/importance_20190210.png" width="500" align="center"></p>
<p><strong><center>Fig3: feature importance</center></strong></p>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/importances_part.png" width="300" align="center"></p>
<p><strong><center>Fig4: part of feature importance extracted from “first_active_month”</center></strong></p>
<p>Take a further look at the Fig3, “first_active_month_elapsed_time_today” contributes most to the model prediction while “first_active_month_monthsession_January” contributes least. Among the feat extracted from date data shown in the Fig4, “first_active_month_elapsed_time_today” gains the most importance while the “first_active_month_monthsession_January” gain the least importance as well, which means valuable information hidden in “first_active_month”. Isn’t it a intersting finding? </p>
<p>When we compare distribution training dataset and testing dataset of the same feat, here comes new findings. “first_active_month_elapsed_time_today”, “first_active_month_elapsed_time_specific” shows measurable different distribution between training data and testing data, among which the first one is the feature picked by the above two questions. On the other hand, the left feats couldn’t provide considerable difference on data distribution between two datasets, which is relatively consistent with the result shown in feat importance figure. More details could refer to my github <a href="https://github.com/PaperStrange/Udacity_records.git" target="_blank" rel="noopener">here</a>.</p>
<h2 id="What’s-next"><a href="#What’s-next" class="headerlink" title="What’s next?"></a>What’s next?</h2><p>Up to now, we have briefly went through the whole data processing procedure. For me, next i’d like to add more feats by considering other files provided by this competition. Also, it is advisable for you to start a mining journal following exsited kernel which is listed in the below references. By the way, there is a few questions that i want to share with you which i think maybe desirble to be devoted to:</p>
<ul>
<li><p>How many feats are suitable? Generally, the more feats you obtain may not guarantee higer submit score you expect</p>
</li>
<li><p>For this model, missing value would not lead to the failure of LightGBM. If using LightGBM, how to deal with missing values? Imputer or just keep by?</p>
</li>
</ul>
<p>Hope everyone has a magic data miner time! :)</p>
<p><a id="3"></a> <br></p>
<h2 id="3-References"><a href="#3-References" class="headerlink" title="3. References"></a>3. References</h2><ol>
<li><p><a href="https://www.kaggle.com/chauhuynh/my-first-kernel-3-699/" target="_blank" rel="noopener">My first kernel (3.699) by Chau Ngoc Huynh</a></p>
</li>
<li><p><a href="https://www.kaggle.com/denzo123/a-closer-look-at-date-variables" target="_blank" rel="noopener">A Closer Look at Date Variables by Robin Denz</a></p>
</li>
<li><p><a href="https://www.kaggle.com/konradb/lgb-fe-lb-3-707" target="_blank" rel="noopener">LGB + FE (LB 3.707) by Konrad Banachewicz</a></p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://PaperStrange.github.io/2019/03/11/A_start_for_kaggler/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziqiang Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello, world :)">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/11/A_start_for_kaggler/" itemprop="url">A way to begin your first data analysis competition</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-11T22:26:07+08:00">
                2019-03-11
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-05-14T22:27:49+08:00">
                2019-05-14
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/data-analysis/" itemprop="url" rel="index">
                    <span itemprop="name">data analysis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/11/A_start_for_kaggler/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/03/11/A_start_for_kaggler/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/03/11/A_start_for_kaggler/" class="leancloud_visitors" data-flag-title="A way to begin your first data analysis competition">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,058
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Before-starting…"><a href="#Before-starting…" class="headerlink" title="Before starting…"></a>Before starting…</h2><p>Now it is my turn to give birth to my first blog to introduce the thoungt dived in my time capsules. Each period, i think, is destined to be a dramatic and meaningful recall to me and for you too.</p>
<h1 id="Today’s-topic-how-to-get-ready-for-a-kaggle-competition-as-a-beginner"><a href="#Today’s-topic-how-to-get-ready-for-a-kaggle-competition-as-a-beginner" class="headerlink" title="Today’s topic: how to get ready for a kaggle competition as a beginner?"></a>Today’s topic: how to get ready for a kaggle competition as a beginner?</h1><h3 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h3><ol>
<li><a href="#Pre-requirements">Pre-requirements</a><ul>
<li>Windows</li>
<li>Linux</li>
</ul>
</li>
<li><a href="#procedures">Main procedures</a><ul>
<li>Question: ask, ask and ask</li>
<li>Train-Validate-Test: beyond a cycle</li>
<li>Display: what about telling a story?</li>
</ul>
</li>
<li><a href="#push">Find your push!</a></li>
</ol>
<h2 id="Pre-requirements"><a href="#Pre-requirements" class="headerlink" title="Pre-requirements "></a>Pre-requirements <a name="Pre-requirements"></a></h2><p>The requirements could be divided into two parts: platform requirements and term or prior knowledge requirements. For platform requirements, commonly, linux systems always make a start more convenient than windows and also bring more potential conflicts and bugs. For terms you need, it highly depends on the field and the problem you dive into. For simplicity, this section mainly focus on the first part: platform requirements.</p>
<!-- At first, there are some basic python packages are strongly recommended to install. The list is supposed to include at least the packages below: -->
<!-- (1) [Numpy](https://docs.scipy.org/doc/numpy-1.16.1/user/), [Pandas](http://pandas.pydata.org/pandas-docs/stable/) and [Matplotlib](https://matplotlib.org/contents.html)

(2) [scipy](https://docs.scipy.org/doc/scipy/reference/), [sklearn](https://scikit-learn.org/stable/user_guide.html)

(3) [yapf](https://github.com/google/yapf), [pytest](https://docs.pytest.org/en/latest/contents.html#toc)

The first three are so super common used that are recommended nearly in every blogs using python. The middle two packages are recommended to avoid repetitive work when constructing functions during main process like data processing, models building and result evaluation. The last two packages are the guiders for better code style. Python is really powerful and magical, there are many beautiful and fantastic packages deserved to dive into~ :)
 -->
<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>Let’s start with linux first. As we know, there are many kinds of linux systems lilke RedHat, Ubuntu, Centos and so on. Here Ubuntu is choosed for its low dependent of hardware support and desktop like windows.</p>
<p>Since the main purpose of preparation is aimed at reducing those unnecessary time costs, checking the version of your system will be a nice start because the pre-installed softwares in most linux system are often different with each other. Like python, different ubuntu system pre-install different version. What you should check include several key points listed below:</p>
<ul>
<li>Pre-installed hardware governing tools</li>
<li>Pre-installed compiler</li>
<li>The enviroment path </li>
</ul>
<p>Tutorials to guide your check in Ubuntu could be found in other blog of mine labeled as “computer-toolbox”. Here, a brief, whole procedure is the main focus.</p>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>Compared with linxu, using windows could save time of installing hardware and their governing tools most of time, meanwhile the installation of compiler, IDE and other developer helper maybe much easier. However, a correct environment path weights more for windows because of the potential annoying bugs. Then, find out the weakness brought by the programming language you choose and fix it. For python, you could refer to the discussions in reddit <a href="https://www.reddit.com/r/Python/comments/f5tex/what_are_the_main_weaknesses_of_python_as_a/" target="_blank" rel="noopener">here</a>. At last, a file manger is a good helper to lead you among the messy cache files to find out your demand. <code>Everything</code> is recommmended and could be downloaded freely <a href="https://www.voidtools.com/zh-cn/" target="_blank" rel="noopener">here</a>.</p>
<h2 id="Main-procedures"><a href="#Main-procedures" class="headerlink" title="Main procedures "></a>Main procedures <a name="procedures"></a></h2><h3 id="Question-ask-ask-and-ask"><a href="#Question-ask-ask-and-ask" class="headerlink" title="Question: ask, ask and ask"></a>Question: ask, ask and ask</h3><p>Beleive your initial impulse and vision could make you much more comfortable for a continuous contribution. The first step to beat down a competition is asking questions. No matter how many time you have, no matter how experienced you are, asking could help you have a clear task and vision all the time. Just stop looking for experiences but looking for questions and it will help you much easier get ready for the competition. The next question is, where should you ask? Platform like stackflow, reddit and quora are pretty good choice for the veteran while the kernel in each kaggle competition, issues in each github are much acceptable for the novice. In a word, find out a suitable platform for yourself and keep asking during the competition, then you are on the way to the champion ~</p>
<h3 id="Train-Validate-Test-why-not"><a href="#Train-Validate-Test-why-not" class="headerlink" title="Train-Validate-Test: why not?"></a>Train-Validate-Test: why not?</h3><p>Besides the necessary habit formed from the above, let’s focus on more detail about the common tricks. Typically, we would like to split data into three parts: train, validation and test to avoid over-fitting. Remember never touch test data when training? That is it. </p>
<p>The point is different models, different split schemes. For example, convolutional neutral network generally show more sensitivity to the number of training data than generative adversarial network, thus for the first kind of model, more data is needed for training. In a word, no eternal truth and the truth is always changeable but also worth to explore.</p>
<h3 id="Display-what-about-telling-a-story"><a href="#Display-what-about-telling-a-story" class="headerlink" title="Display: what about telling a story?"></a>Display: what about telling a story?</h3><p>After completing the above steps, most difficult programming parts shall be worked out. Just take a breathe, say a congratulations to yourself! Good job! But wait, how to share your great findings with your team members? Well, for this question, i heared so many points to advocate the importance of colorful graphs, charts while it really confuses me: why do we rely on them so much? Only a presentation full of beautiful telling graphs shall be recognized as a sucess? For me, they seem too dogmatic to use, but why so many people like it? </p>
<p>The focus of nowadays presentation put too much attention to tools rather than the speaker itself. Take a display of your work is somehow like telling a story. Imagine the way you persuaded your mother or father to buy an attractive toy or clothes when you were a child, then write it in your words to create a prototype of story. Next, it’s time to dress-up your work. Think from the view of audiences is suggested here, just ask yourself some simple questions like What major, profession do they come from? How many audiences require prior knowledge and how many not? And imagine, if you are one of them, what do you want to hear from this story is exactly what your polishing should carefully focus on. So far, the only thing left to be done is talk. Share your story with your team numbers and ask for advices will bring you more fresh ideas and never let you down. Enjoy talking! Enjoy the gradual grow up of new stories!</p>
<h2 id="Find-your-push"><a href="#Find-your-push" class="headerlink" title="Find your push! "></a>Find your push! <a name="push"></a></h2><p>Many competition will provide timeline and key points in their website. During the long long procedure, find your push, especially your internal push will give you endless courage. Like a honest, determined, energetic friend, he/she may whisper warmfully: forget the fantastic reward, taste the procedure, witness the growth up of one and another idea. How amazing it is! For me, break your comfort zone like a brave always push me from stopping for a computer game. And you? Have you find your push yet?</p>
<p>Awesome! The main contents of this blog ends here. After finishing the whole reading, why not give it a try? I mean, everyone has their first time to move from their comfort zone, just don’t let the coward in your heart stop your infinite possibility of journey :smile::smile:</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://PaperStrange.github.io/2019/02/13/Data Mine1_kaggle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ziqiang Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello, world :)">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/13/Data Mine1_kaggle/" itemprop="url">An initial explore for Elo Merchant Category Recommendation, a kaggle competition</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-13T12:09:54+08:00">
                2019-02-13
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-06-17T22:29:27+08:00">
                2019-06-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/data-analysis/" itemprop="url" rel="index">
                    <span itemprop="name">data analysis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/13/Data Mine1_kaggle/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/02/13/Data Mine1_kaggle/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/02/13/Data Mine1_kaggle/" class="leancloud_visitors" data-flag-title="An initial explore for Elo Merchant Category Recommendation, a kaggle competition">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  854
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- ![Elo Merchant Category Recommendation competition]("https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/title_image.png") -->
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/title_image.png" align="center"></p>
<h2 id="Competition-Introduction"><a href="#Competition-Introduction" class="headerlink" title="Competition Introduction"></a>Competition Introduction</h2><p>In Elo Merchant Category Recommendation competition, kagglers will develop algorithms to identify and serve the most relevant opportunities to individuals, by uncovering signal in <code>customer loyalty</code>, which will improve customers’ lives and help Elo reduce unwanted campaigns as well as create the right experience for customers. The competition entrance is <a href="https://www.kaggle.com/c/elo-merchant-category-recommendation" target="_blank" rel="noopener">here</a>.</p>
<h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>Using a <a href="https://github.com/Microsoft/LightGBM" target="_blank" rel="noopener">LightGBM</a> model, this blog tries to dive into initial explore of training and testing datasets. New features are built by extracting numberical feat from <code>first active month</code> in order to recover some information from the time series.</p>
<h2 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h2><ol>
<li><a href="#1">Questions for better business understanding</a></li>
<li><a href="#2">Result evaluation: conclusion and discussion</a></li>
<li><a href="#3">References</a></li>
</ol>
<p><a id="1"></a> <br></p>
<h3 id="1-Questions-for-better-business-understanding"><a href="#1-Questions-for-better-business-understanding" class="headerlink" title="1. Questions for better business understanding"></a>1. Questions for better business understanding</h3><p>At the beginning, a good understanding of data is always appreciable. In this blog we only consider two datasets: training dataset and testing dataset. By asking  questions, here is what i find:</p>
<h4 id="Question-1-1-What-scale-and-what-kind-of-data-are-necessary-for-customer-loyalty-prediction-model"><a href="#Question-1-1-What-scale-and-what-kind-of-data-are-necessary-for-customer-loyalty-prediction-model" class="headerlink" title="Question 1.1: What scale and what kind of data are necessary for customer loyalty prediction model?"></a>Question 1.1: What scale and what kind of data are necessary for customer loyalty prediction model?</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/scale_and_memory_usage.png" width="300" align="center"></p>
<p><strong><center>Fig1: scale and memory usage of datasets</center></strong></p>
<p>A: This question is supposed to provide proper evaluation of how many sources company need to invest for the deploy of customer loyalty prediction model. Because MemoryError is raised when checking transaction dataset, i choose to evaluate the memory usage of theses data files by using google colab.</p>
<p>The results of scale and memory usage of each dataset are shown in the Fig1. As it is shown above, all needed data could be divided in three parts: card feature data, transaction data and merchant data. Card feature data and merchant data both are relatively small than transaction data, which the later is nearly 30 million, with memory usage more than 8 GB in total in this competition</p>
<h4 id="Question-1-2-In-which-way-the-application-of-customer-loyalty-prediction-model-would-impact-different-business-units"><a href="#Question-1-2-In-which-way-the-application-of-customer-loyalty-prediction-model-would-impact-different-business-units" class="headerlink" title="Question 1.2: In which way the application of customer loyalty prediction model would impact different business units?"></a>Question 1.2: In which way the application of customer loyalty prediction model would impact different business units?</h4><p>A:<br>By diving into this question, necessary changes would to be revealed which will help company work better.</p>
<p>If customer loyalty prediction model are applied, finance part may need to expand or reconstruct existed database to record more features as well as missing values; sales part need to use the conclusion of model for decision and collect customer review; technology part is supposed to assure model stability and improve model using or constructing new features from finance part and reviews from sales part. This process would be visualized by a business cycle, more details for model deploy is provided in this blog <a href="https://towardsdatascience.com/scaling-ai-2be294368504" target="_blank" rel="noopener">here</a>.</p>
<h4 id="Question-1-3-How-to-evaluate-the-influence-of-deploying-customer-loyalty-prediction-model-Is-modeling-target-really-convincible"><a href="#Question-1-3-How-to-evaluate-the-influence-of-deploying-customer-loyalty-prediction-model-Is-modeling-target-really-convincible" class="headerlink" title="Question 1.3: How to evaluate the influence of deploying customer loyalty prediction model? Is modeling target really convincible?"></a>Question 1.3: How to evaluate the influence of deploying customer loyalty prediction model? Is modeling target really convincible?</h4><p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/target_dis.png" width="450" align="center"></p>
<p><strong><center>Fig2: distribution of “target”</center></strong></p>
<p>A: This question aims at assuring the application of customer loyalty prediction model more controllable and scalable.</p>
<p>Take a look at the Fig 2, the feat column “target”, the modeling target, is stored in numberical data type which means several loss function like MSE could be used for evaluation. By checking its distribution, there are outliers around -30 found in modeling target which means not all target data is convincible.</p>
<p><a id="2"></a> <br></p>
<h3 id="2-Result-evaluation-conclusion-and-discussion"><a href="#2-Result-evaluation-conclusion-and-discussion" class="headerlink" title="2. Result evaluation: conclusion and discussion"></a>2. Result evaluation: conclusion and discussion</h3><p>Same as what i did in the first section, some questions i found are reviewed and answered in this step. Generally, the more <code>good</code> questions are reviewed, the better understanding of model evaluation you gain.</p>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/importance_20190210.png" width="500" align="center"></p>
<p><strong><center>Fig3: feature importance</center></strong></p>
<p><img src="https://raw.githubusercontent.com/PaperStrange/PaperStrange.github.io/master/uploads/importances_part.png" width="300" align="center"></p>
<p><strong><center>Fig4: part of feature importance extracted from “first_active_month”</center></strong></p>
<p>Take a further look at the Fig3, “first_active_month_elapsed_time_today” contributes most to the model prediction while “first_active_month_monthsession_January” contributes least. Among the feat extracted from date data shown in the Fig4, “first_active_month_elapsed_time_today” gains the most importance while the “first_active_month_monthsession_January” gain the least importance as well, which means valuable information hidden in “first_active_month”. Isn’t it a intersting finding? </p>
<p>When we compare distribution training dataset and testing dataset of the same feat, here comes new findings. “first_active_month_elapsed_time_today”, “first_active_month_elapsed_time_specific” shows measurable different distribution between training data and testing data, among which the first one is the feature picked by the above two questions. On the other hand, the left feats couldn’t provide considerable difference on data distribution between two datasets, which is relatively consistent with the result shown in feat importance figure. More details could refer to my github <a href="https://github.com/PaperStrange/Udacity_records.git" target="_blank" rel="noopener">here</a>.</p>
<h2 id="What’s-next"><a href="#What’s-next" class="headerlink" title="What’s next?"></a>What’s next?</h2><p>Up to now, we have briefly went through the whole data processing procedure. For me, next i’d like to add more feats by considering other files provided by this competition. Also, it is advisable for you to start a mining journal following exsited kernel which is listed in the below references. By the way, there is a few questions that i want to share with you which i think maybe desirble to be devoted to:</p>
<ul>
<li><p>How many feats are suitable? Generally, the more feats you obtain may not guarantee higer submit score you expect</p>
</li>
<li><p>For this model, missing value would not lead to the failure of LightGBM. If using LightGBM, how to deal with missing values? Imputer or just keep by?</p>
</li>
</ul>
<p>Hope everyone has a magic data miner time! :)</p>
<p><a id="3"></a> <br></p>
<h2 id="3-References"><a href="#3-References" class="headerlink" title="3. References"></a>3. References</h2><ol>
<li><p><a href="https://www.kaggle.com/chauhuynh/my-first-kernel-3-699/" target="_blank" rel="noopener">My first kernel (3.699) by Chau Ngoc Huynh</a></p>
</li>
<li><p><a href="https://www.kaggle.com/denzo123/a-closer-look-at-date-variables" target="_blank" rel="noopener">A Closer Look at Date Variables by Robin Denz</a></p>
</li>
<li><p><a href="https://www.kaggle.com/konradb/lgb-fe-lb-3-707" target="_blank" rel="noopener">LGB + FE (LB 3.707) by Konrad Banachewicz</a></p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/touxiang.jpg"
                alt="Ziqiang Huang" />
            
              <p class="site-author-name" itemprop="name">Ziqiang Huang</p>
              <p class="site-description motion-element" itemprop="description">=Explore or Explode=</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/paperstrange" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="ziqianghuang@hust.edu.cn" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ziqiang Huang</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>



  <div class="footer-custom">Hosted by <a target="_blank" href="https://github.com/PaperStrange/PaperStrange.github.io">GitHub Pages</a></div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://Mr.huang.disqus.com/count.js" async></script>
    

    

  




	





  














  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("uggdldePw9b53l6Sih8jNsg1-gzGzoHsz", "9Re7YaGRwH9FxTJxbYepouqw");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
